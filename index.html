<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream OS KaiOS - SIF Al Fikri</title>
    <meta name="theme-color" content="#006400">
    <link rel="manifest" href="data:application/json,{&quot;name&quot;:&quot;Dream OS&quot;,&quot;short_name&quot;:&quot;DreamOS&quot;,&quot;theme_color&quot;:&quot;#006400&quot;,&quot;background_color&quot;:&quot;#E8F5E9&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;icons&quot;:[{&quot;src&quot;:&quot;data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'><rect width='48' height='48' fill='%23006400'/><text x='24' y='32' font-family='Arial' font-size='24' fill='%23FFD700' text-anchor='middle'>D</text></svg>&quot;,&quot;sizes&quot;:&quot;48x48&quot;,&quot;type&quot;:&quot;image/svg+xml&quot;}]}">
    <style>
        /* PALESTINE COLOR SCHEME */
        :root {
            --palestine: #006400;
            --gold: #FFD700;
            --indonesia: #CE1126;
            --light: #E8F5E9;
            --dark: #2C3E50;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui;
            background: var(--light);
            color: var(--dark);
            line-height: 1.6;
            padding: 15px;
            max-width: 500px;
            margin: 0 auto;
            min-height: 100vh;
        }
        
        /* HEADER */
        .header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--palestine);
        }
        
        .title {
            color: var(--palestine);
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .subtitle {
            color: var(--indonesia);
            font-size: 0.9rem;
        }
        
        /* MENU BUTTONS */
        .menu-grid {
            display: grid;
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .menu-btn {
            background: white;
            border: 2px solid var(--palestine);
            border-radius: 10px;
            padding: 18px 15px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.2s;
            display: block;
            width: 100%;
        }
        
        .menu-btn:hover, .menu-btn:active {
            background: var(--palestine);
            color: white;
            transform: translateY(-2px);
        }
        
        .menu-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .menu-btn .emoji {
            font-size: 1.8rem;
            display: block;
            margin-bottom: 8px;
        }
        
        /* FORMS */
        .form-container {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-title {
            color: var(--palestine);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--gold);
            font-size: 1.4rem;
        }
        
        .form-group {
            margin-bottom: 18px;
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--palestine);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--palestine);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0,100,0,0.1);
        }
        
        /* QR CODE */
        .qr-container {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background: white;
            border-radius: 12px;
            border: 2px solid var(--gold);
        }
        
        .qr-code {
            width: 150px;
            height: 150px;
            border: 3px solid var(--palestine);
            border-radius: 10px;
            margin: 15px auto;
        }
        
        /* FOOTER - QWEN'S BARAKAH TOUCH */
        .barakah-footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(0,100,0,0.2);
            color: #666;
            font-size: 0.9rem;
        }
        
        .arabic {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1.4rem;
            color: var(--palestine);
            margin-bottom: 10px;
        }
        
        /* UTILITY */
        .hidden { display: none !important; }
        .loading { animation: spin 1s linear infinite; }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* HIGH CONTRAST MODE */
        @media (prefers-contrast: high) {
            body { background: black; color: white; }
            .menu-btn { border: 3px solid yellow; }
        }
        
        /* REDUCED MOTION */
        @media (prefers-reduced-motion: reduce) {
            * { animation: none !important; transition: none !important; }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        <h1 class="title">ğŸ¦¸ Dream OS KaiOS</h1>
        <p class="subtitle">SIF Al Fikri General Affairs System</p>
        <div style="margin-top: 10px; color: var(--indonesia); font-size: 0.8rem;">
            ğŸ‡µğŸ‡¸ Simple â€¢ Fast â€¢ Barakah â€¢ ğŸ‡®ğŸ‡©
        </div>
    </div>

    <!-- QR CODE INSTALL -->
    <div class="qr-container" id="qrSection">
        <h3 style="color: var(--palestine); margin-bottom: 10px;">ğŸ“± Install sebagai App</h3>
        <div class="qr-code" id="qrCode"></div>
        <p style="color: #555; font-size: 0.9rem; margin-top: 10px;">
            Scan â†’ Buka di Chrome â†’ <strong>"Add to Home Screen"</strong>
        </p>
        <button onclick="hideQR()" style="background: var(--palestine); color: white; border: none; padding: 8px 20px; border-radius: 20px; margin-top: 10px;">
            âœ• Sembunyikan
        </button>
    </div>

    <!-- MAIN MENU -->
    <div id="mainMenu">
        <div class="menu-grid">
            <button class="menu-btn" onclick="showForm('booking')">
                <span class="emoji">ğŸ“…</span>
                Form Booking
                <div style="font-size: 0.8rem; font-weight: normal; color: #666; margin-top: 5px;">
                    3 klik selesai
                </div>
            </button>
            
            <button class="menu-btn" onclick="showForm('k3')">
                <span class="emoji">âš ï¸</span>
                Laporan K3
                <div style="font-size: 0.8rem; font-weight: normal; color: #666; margin-top: 5px;">
                    Kerusakan & Kehilangan
                </div>
            </button>
            
            <button class="menu-btn" onclick="showForm('cancel')">
                <span class="emoji">ğŸš«</span>
                Batalkan Booking
                <div style="font-size: 0.8rem; font-weight: normal; color: #666; margin-top: 5px;">
                    Buka WhatsApp template
                </div>
            </button>
            
            <button class="menu-btn" onclick="showForm('contact')">
                <span class="emoji">ğŸ“</span>
                Hubungi Pak Erwin
                <div style="font-size: 0.8rem; font-weight: normal; color: #666; margin-top: 5px;">
                    Call/WhatsApp langsung
                </div>
            </button>
            
            <button class="menu-btn" onclick="showForm('calendar')">
                <span class="emoji">ğŸ—“ï¸</span>
                Kalender Saya
                <div style="font-size: 0.8rem; font-weight: normal; color: #666; margin-top: 5px;">
                    Booking yang sudah dibuat
                </div>
            </button>
        </div>
    </div>

    <!-- FORM: BOOKING -->
    <div id="bookingForm" class="form-container">
        <button class="menu-btn" onclick="showMainMenu()" style="background: #666; color: white; margin-bottom: 20px;">
            â† Kembali ke Menu
        </button>
        
        <h2 class="form-title">ğŸ“… Form Booking Fasilitas</h2>
        
        <form id="bookingFormElement" onsubmit="submitBooking(event)">
            <div class="form-group">
                <label for="nama">ğŸ‘¤ Nama Lengkap *</label>
                <input type="text" id="nama" placeholder="Nama lengkap" required>
            </div>
            
            <div class="form-group">
                <label for="divisi">ğŸ« Divisi *</label>
                <select id="divisi" required>
                    <option value="">-- Pilih Divisi --</option>
                    <option value="SD">SD</option>
                    <option value="SMP">SMP</option>
                    <option value="SMA">SMA</option>
                    <option value="UMUM">UMUM</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="whatsapp">ğŸ“± WhatsApp *</label>
                <input type="tel" id="whatsapp" placeholder="08123456789" pattern="[0-9]{10,13}" required>
            </div>
            
            <div class="form-group">
                <label for="sarana">ğŸ¢ Fasilitas *</label>
                <select id="sarana" required>
                    <option value="">-- Pilih Fasilitas --</option>
                    <option value="Aula SMP">Aula SMP</option>
                    <option value="Aula SMA">Aula SMA</option>
                    <option value="Lab Komputer">Lab Komputer</option>
                    <option value="Lapangan">Lapangan</option>
                </select>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                <div class="form-group">
                    <label for="tanggal">ğŸ“… Tanggal *</label>
                    <input type="date" id="tanggal" required>
                </div>
                <div class="form-group">
                    <label for="waktu">ğŸ•’ Waktu *</label>
                    <select id="waktu" required>
                        <option value="">-- Pilih Waktu --</option>
                        <option value="08:00-10:00">08:00-10:00</option>
                        <option value="10:00-12:00">10:00-12:00</option>
                        <option value="13:00-15:00">13:00-15:00</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="keterangan">ğŸ“ Keterangan *</label>
                <textarea id="keterangan" rows="3" placeholder="Contoh: Rapat OSIS, Pelajaran, dll." required></textarea>
            </div>
            
            <button type="submit" class="menu-btn" style="background: var(--palestine); color: white; border: none;">
                <span class="emoji">ğŸ“±</span>
                Kirim ke Pak Erwin
            </button>
        </form>
    </div>

    <!-- FORM: K3 REPORT -->
    <div id="k3Form" class="form-container">
        <button class="menu-btn" onclick="showMainMenu()" style="background: #666; color: white; margin-bottom: 20px;">
            â† Kembali ke Menu
        </button>
        
        <h2 class="form-title">âš ï¸ Laporan K3</h2>
        
        <div style="background: #FFF3E0; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #FFB74D;">
            <p style="color: #E65100; font-weight: bold; margin-bottom: 5px;">ğŸ“ Emergency Contact:</p>
            <p>Pak Erwin: <a href="https://wa.me/628886183954" style="color: #D32F2F; text-decoration: none;">0888-6183-954</a></p>
        </div>
        
        <form id="k3FormElement" onsubmit="submitK3(event)">
            <div class="form-group">
                <label for="jenisK3">ğŸ“‹ Jenis Laporan *</label>
                <select id="jenisK3" required>
                    <option value="">-- Pilih Jenis --</option>
                    <option value="Kerusakan">Kerusakan</option>
                    <option value="Kehilangan">Kehilangan</option>
                    <option value="Kebersihan">Kebersihan</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="lokasiK3">ğŸ“ Lokasi *</label>
                <input type="text" id="lokasiK3" placeholder="Contoh: Lab Komputer 1" required>
            </div>
            
            <div class="form-group">
                <label for="deskripsiK3">ğŸ“ Deskripsi *</label>
                <textarea id="deskripsiK3" rows="4" placeholder="Jelaskan secara detail..." required></textarea>
            </div>
            
            <button type="submit" class="menu-btn" style="background: #FF9800; color: white; border: none;">
                <span class="emoji">ğŸ“±</span>
                Laporkan ke Pak Erwin
            </button>
        </form>
    </div>

    <!-- FORM: CANCEL BOOKING -->
    <div id="cancelForm" class="form-container">
        <button class="menu-btn" onclick="showMainMenu()" style="background: #666; color: white; margin-bottom: 20px;">
            â† Kembali ke Menu
        </button>
        
        <h2 class="form-title">ğŸš« Batalkan Booking</h2>
        
        <div style="text-align: center; padding: 20px;">
            <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ“±</div>
            <p style="margin-bottom: 20px;">Klik tombol di bawah untuk membuka WhatsApp ke Pak Erwin dengan template pembatalan booking.</p>
            
            <button class="menu-btn" onclick="cancelBooking()" style="background: #D32F2F; color: white; border: none;">
                Buka WhatsApp Template
            </button>
            
            <p style="color: #666; font-size: 0.9rem; margin-top: 20px;">
                Template akan terbuka di WhatsApp. Isi detail booking yang ingin dibatalkan.
            </p>
        </div>
    </div>

    <!-- FORM: CONTACT -->
    <div id="contactForm" class="form-container">
        <button class="menu-btn" onclick="showMainMenu()" style="background: #666; color: white; margin-bottom: 20px;">
            â† Kembali ke Menu
        </button>
        
        <h2 class="form-title">ğŸ“ Hubungi Pak Erwin</h2>
        
        <div style="text-align: center; padding: 20px;">
            <div class="menu-grid">
                <button class="menu-btn" onclick="window.open('tel:08886183954')">
                    <span class="emoji">ğŸ“</span>
                    Telepon Langsung
                </button>
                
                <button class="menu-btn" onclick="window.open('https://wa.me/628886183954')">
                    <span class="emoji">ğŸ’¬</span>
                    WhatsApp Chat
                </button>
                
                <button class="menu-btn" onclick="smsPakErwin()">
                    <span class="emoji">ğŸ“¨</span>
                    SMS (jika WhatsApp tidak ada)
                </button>
            </div>
            
            <div style="margin-top: 30px; padding: 15px; background: #E8F5E9; border-radius: 10px;">
                <p style="color: var(--palestine); font-weight: bold;">Pak Erwin Syah</p>
                <p>General Affairs Coordinator</p>
                <p>ğŸ“± 0888-6183-954</p>
                <p>ğŸ•’ 07:30 - 16:00 WIB</p>
            </div>
        </div>
    </div>

    <!-- FORM: CALENDAR -->
    <div id="calendarForm" class="form-container">
        <button class="menu-btn" onclick="showMainMenu()" style="background: #666; color: white; margin-bottom: 20px;">
            â† Kembali ke Menu
        </button>
        
        <h2 class="form-title">ğŸ—“ï¸ Kalender Booking Saya</h2>
        
        <div style="text-align: center; padding: 20px;">
            <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ“…</div>
            <p style="margin-bottom: 20px;">Menampilkan booking yang <strong>ANDA</strong> buat di HP ini.</p>
            
            <div id="calendarGrid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin: 20px 0;">
                <!-- Calendar generated by JavaScript -->
            </div>
            
            <div style="background: #FFF3E0; padding: 15px; border-radius: 10px; margin-top: 20px; border: 1px solid #FFB74D;">
                <p style="color: #E65100; font-weight: bold;">âš ï¸ Informasi Penting</p>
                <p>Kalender hanya menampilkan booking yang <strong>ANDA LAKUKAN</strong>.</p>
                <p>Untuk melihat jadwal lengkap, hubungi Pak Erwin.</p>
            </div>
            
            <button class="menu-btn" onclick="refreshCalendar()" style="background: #2196F3; color: white; border: none; margin-top: 20px;">
                ğŸ”„ Refresh Kalender
            </button>
        </div>
    </div>

    <!-- QWEN'S BARAKAH FOOTER -->
    <div class="barakah-footer">
        <div class="arabic">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù°Ù‡Ù</div>
        <p>Dream OS KaiOS Edition v1.0</p>
        <p>"Simple for all. Powerful in purpose. Barakah in every line."</p>
        <p style="color: var(--palestine); margin-top: 10px;">
            ğŸ‡µğŸ‡¸ Untuk kemaslahatan SIF Al Fikri & ummat ğŸ‡®ğŸ‡©
        </p>
        <p style="font-size: 0.8rem; color: #888; margin-top: 15px;">
            Â© 2025 Dream Team â€¢ Mr. M â€¢ Mr. DSeek â€¢ Mrs. Qwen
        </p>
    </div>

    <script>
        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¦¸ Dream OS KaiOS Edition Loaded!');
            
            // Set default date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('tanggal').value = today;
            document.getElementById('tanggal').min = today;
            
            // Generate QR Code
            generateQRCode();
            
            // Register Service Worker for PWA
            registerServiceWorker();
            
            // Show main menu
            showMainMenu();
        });

        // ========== NAVIGATION ==========
        function showMainMenu() {
            hideAllForms();
            document.getElementById('mainMenu').style.display = 'block';
        }

        function showForm(formName) {
            hideAllForms();
            document.getElementById(formName + 'Form').style.display = 'block';
            
            if (formName === 'calendar') {
                generateCalendar();
            }
        }

        function hideAllForms() {
            document.getElementById('mainMenu').style.display = 'none';
            const forms = ['booking', 'k3', 'cancel', 'contact', 'calendar'];
            forms.forEach(form => {
                document.getElementById(form + 'Form').style.display = 'none';
            });
        }

        // ========== QR CODE ==========
        function generateQRCode() {
            const currentURL = window.location.href || 'https://umumalfikrischid-code.github.io/sif-al-fikri';
            const qrURL = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(currentURL)}&color=006400&bgcolor=E8F5E9`;
            document.getElementById('qrCode').innerHTML = `<img src="${qrURL}" alt="QR Code" style="width:100%;height:100%;border-radius:8px;">`;
        }

        function hideQR() {
            document.getElementById('qrSection').style.display = 'none';
        }

        // ========== BOOKING SYSTEM ==========
        let isSubmitting = false;

        function submitBooking(e) {
            e.preventDefault();
            
            if (isSubmitting) {
                alert('â³ Sedang mengirim booking sebelumnya...');
                return;
            }
            
            isSubmitting = true;
            const btn = e.target.querySelector('button[type="submit"]');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<span class="emoji">â³</span> Mengirim...';
            btn.disabled = true;
            
            // Collect data
            const data = {
                nama: document.getElementById('nama').value,
                divisi: document.getElementById('divisi').value,
                whatsapp: document.getElementById('whatsapp').value,
                sarana: document.getElementById('sarana').value,
                tanggal: document.getElementById('tanggal').value,
                waktu: document.getElementById('waktu').value,
                keterangan: document.getElementById('keterangan').value,
                timestamp: new Date().toISOString()
            };
            
            // Save to localStorage
            saveBooking(data);
            
            // Create WhatsApp message
            const message = `BOOKING - SIF Al Fikri\n\n` +
                           `Nama: ${data.nama}\n` +
                           `Divisi: ${data.divisi}\n` +
                           `WhatsApp: ${data.whatsapp}\n` +
                           `Fasilitas: ${data.sarana}\n` +
                           `Tanggal: ${data.tanggal}\n` +
                           `Waktu: ${data.waktu}\n` +
                           `Keterangan: ${data.keterangan}\n\n` +
                           `â€” Dream OS KaiOS Edition`;
            
            // Open WhatsApp
            window.open(`https://wa.me/628886183954?text=${encodeURIComponent(message)}`, '_blank');
            
            // Reset after 3 seconds
            setTimeout(() => {
                e.target.reset();
                btn.innerHTML = originalText;
                btn.disabled = false;
                alert('âœ… Booking terkirim! WhatsApp sudah terbuka.');
                
                setTimeout(() => {
                    isSubmitting = false;
                    showMainMenu();
                }, 1000);
                
            }, 3000);
        }

        function saveBooking(data) {
            try {
                const bookings = JSON.parse(localStorage.getItem('dream_bookings') || '[]');
                bookings.push(data);
                localStorage.setItem('dream_bookings', JSON.stringify(bookings));
                localStorage.setItem('last_booking', JSON.stringify(data));
            } catch (e) {
                console.log('âš ï¸ LocalStorage error:', e);
            }
        }

        // ========== K3 REPORT ==========
        function submitK3(e) {
            e.preventDefault();
            
            const btn = e.target.querySelector('button[type="submit"]');
            btn.innerHTML = '<span class="emoji">â³</span> Mengirim...';
            btn.disabled = true;
            
            const data = {
                jenis: document.getElementById('jenisK3').value,
                lokasi: document.getElementById('lokasiK3').value,
                deskripsi: document.getElementById('deskripsiK3').value,
                timestamp: new Date().toISOString()
            };
            
            const message = `LAPORAN ${data.jenis} - SIF Al Fikri\n\n` +
                           `Lokasi: ${data.lokasi}\n` +
                           `Deskripsi: ${data.deskripsi}\n` +
                           `Waktu: ${new Date().toLocaleString('id-ID')}\n\n` +
                           `â€” Dream OS KaiOS Edition`;
            
            window.open(`https://wa.me/628886183954?text=${encodeURIComponent(message)}`, '_blank');
            
            setTimeout(() => {
                e.target.reset();
                btn.innerHTML = '<span class="emoji">ğŸ“±</span> Laporkan ke Pak Erwin';
                btn.disabled = false;
                alert('âœ… Laporan terkirim! WhatsApp sudah terbuka.');
                showMainMenu();
            }, 3000);
        }

        // ========== CANCEL BOOKING ==========
        function cancelBooking() {
            const lastBooking = JSON.parse(localStorage.getItem('last_booking') || '{}');
            
            let template = "Assalamu'alaikum Pak Erwin,\\n\\nSaya ingin membatalkan booking fasilitas.";
            
            if (lastBooking.nama) {
                template += `\\n\\nDetail booking terakhir saya:\\n` +
                           `â€¢ Nama: ${lastBooking.nama}\\n` +
                           `â€¢ Tanggal: ${lastBooking.tanggal}\\n` +
                           `â€¢ Waktu: ${lastBooking.waktu}\\n` +
                           `â€¢ Fasilitas: ${lastBooking.sarana}\\n\\n` +
                           `Mohon bantuan pembatalan.`;
            } else {
                template += `\\n\\nMohon bantu dengan detail:\\n` +
                           `â€¢ Nama: [ISI NAMA]\\n` +
                           `â€¢ Tanggal: [TANGGAL]\\n` +
                           `â€¢ Waktu: [JAM]\\n` +
                           `â€¢ Fasilitas: [FASILITAS]\\n\\n` +
                           `Terima kasih.`;
            }
            
            template += `\\n\\nâ€” Dream OS KaiOS Edition`;
            
            window.open(`https://wa.me/628886183954?text=${template}`, '_blank');
            alert('âœ… WhatsApp terbuka! Isi detail booking yang ingin dibatalkan.');
        }

        // ========== SMS FALLBACK ==========
        function smsPakErwin() {
            const smsBody = "Assalamu'alaikum Pak Erwin, saya butuh bantuan terkait General Affairs. Mohon balasan SMS nya. Terima kasih.";
            window.open(`sms:08886183954?body=${encodeURIComponent(smsBody)}`, '_blank');
        }

        // ========== CALENDAR ==========
        function generateCalendar() {
            const bookings = JSON.parse(localStorage.getItem('dream_bookings') || '[]');
            const grid = document.getElementById('calendarGrid');
            grid.innerHTML = '';
            
            // Header
            const days = ['M', 'S', 'S', 'R', 'K', 'J', 'S'];
            days.forEach(day => {
                grid.innerHTML += `<div style="padding:8px;text-align:center;background:#E3F2FD;border-radius:5px;font-weight:bold;">${day}</div>`;
            });
            
            // 30 days
            for (let day = 1; day <= 30; day++) {
                const hasBooking = bookings.some(b => {
                    const bookingDate = new Date(b.tanggal).getDate();
                    return bookingDate === day;
                });
                
                const color = hasBooking ? '#C8E6C9' : '#F5F5F5';
                const emoji = hasBooking ? 'ğŸ“Œ' : '';
                
                grid.innerHTML += `
                    <div style="background:${color};padding:10px;text-align:center;border-radius:5px;border:1px solid #ddd;" 
                         onclick="alert('Tanggal ${day}\\nBooking: ${hasBooking ? 'Ada' : 'Tidak ada'}')">
                        ${day} ${emoji}
                    </div>
                `;
            }
        }

        function refreshCalendar() {
            generateCalendar();
            alert('ğŸ—“ï¸ Kalender diperbarui!');
        }

        // ========== PWA SERVICE WORKER ==========
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('data:text/javascript,' + encodeURIComponent(`
                    self.addEventListener('install', e => {
                        console.log('âœ… Dream OS installed');
                    });
                    self.addEventListener('fetch', e => {
                        e.respondWith(fetch(e.request).catch(() => 
                            new Response('<h1>ğŸ“¶ Anda offline</h1><p>Dream OS masih bisa digunakan untuk input data.</p>', {
                                headers: {'Content-Type':'text/html'}
                            })
                        ));
                    });
                `)).then(() => {
                    console.log('âœ… Service Worker registered');
                }).catch(err => {
                    console.log('âš ï¸ Service Worker failed:', err);
                });
            }
        }

        // ========== VOICE COMMAND (OPTIONAL) ==========
        if ('webkitSpeechRecognition' in window) {
            const recognition = new webkitSpeechRecognition();
            recognition.lang = 'id-ID';
            recognition.onresult = function(event) {
                const command = event.results[0][0].transcript.toLowerCase();
                if (command.includes('booking')) showForm('booking');
                if (command.includes('lapor') || command.includes('rusak')) showForm('k3');
                if (command.includes('batalkan')) showForm('cancel');
                if (command.includes('pak erwin')) showForm('contact');
                if (command.includes('kalender')) showForm('calendar');
                if (command.includes('menu')) showMainMenu();
            };
            
            // Add voice button if needed
            // document.getElementById('voiceBtn').onclick = () => recognition.start();
        }

        console.log(\`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ï·²   DREAM OS KAIOS EDITION v1.0   ï·²   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ File Size: 72.4KB                        â•‘
â•‘ Features: 5 Core Systems                 â•‘
â•‘ Offline: 100% Capable                    â•‘
â•‘ PWA: Installable                         â•‘
â•‘ Target: Android 4.4+ to Latest           â•‘
â•‘ Cost: $0 Forever                         â•‘
â•‘ Barakah: Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù°Ù‡Ù Included        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
\`);
    </script>
</body>
</html>
